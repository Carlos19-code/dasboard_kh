<!DOCTYPE html>
<html class="light" lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>KHUMOTONE - Acesso Administrativo</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap" rel="stylesheet"/>
<link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#0072FF",
            "background-light": "#FDFDFD",
            "background-dark": "#1a1a1a",
          },
          fontFamily: {
            "display": ["Manrope", "sans-serif"]
          },
          borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
        },
      },
    }
  </script>
<style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      line-height: 1;
    }
    
    /* Efeito de desfoque gaussiano apenas para o background */
    .gaussian-blur-bg {
        filter: blur(9px);
        -webkit-filter: blur(9px);
        transform: scale(1.1); /* Compensa o zoom do blur */
    }

    /* Animações */
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    @keyframes progress {
        0% { width: 0%; }
        100% { width: 100%; }
    }
    
    .animate-shake {
        animation: shake 0.5s ease-in-out;
    }
    
    .animate-pulse-custom {
        animation: pulse 1.5s ease-in-out infinite;
    }
    
    .animate-spin-custom {
        animation: spin 1s linear infinite;
    }
    
    .animate-progress {
        animation: progress 2s ease-in-out;
    }
    
    /* Overlay de loading */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    
    .loading-content {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        text-align: center;
        min-width: 300px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .progress-bar {
        width: 100%;
        height: 4px;
        background: #e5e7eb;
        border-radius: 2px;
        margin-top: 1rem;
        overflow: hidden;
    }
    
    .progress-fill {
        height: 100%;
        background: #0072FF;
        border-radius: 2px;
        width: 0%;
    }
  </style>
</head>
<body class="font-display">
<div class="relative flex min-h-screen w-full flex-col items-center justify-center bg-background-light dark:bg-background-dark p-4 group/design-root">
<!-- Background com desfoque gaussiano -->
<div class="absolute inset-0 bg-cover bg-center gaussian-blur-bg" style="background-image: url('banner1.png');">
</div>

<!-- Overlay de loading -->
<div id="loadingOverlay" class="loading-overlay">
    <div class="loading-content">
        <div class="flex flex-col items-center">
            <!-- Spinner animado -->
            <div class="w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin-custom mb-4"></div>
            
            <!-- Texto animado -->
            <p class="text-lg font-semibold text-gray-800 mb-2 animate-pulse-custom">Processando login...</p>
            <p class="text-sm text-gray-600">Aguarde um momento</p>
            
            <!-- Barra de progresso -->
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>
    </div>
</div>

<!-- Container do formulário SEM desfoque -->
<div class="relative w-full max-w-md rounded-xl bg-background-light/90 dark:bg-background-dark/90 border border-black/10 dark:border-white/10 shadow-2xl">
<div class="flex flex-col p-8 md:p-12">
<div class="mb-8 flex flex-col items-center">
<div>
    <img src="logo2.png" alt="KHUMOTONE Logo" class="w-60" >
</div>
<p class="text-gray-600 dark:text-gray-400 mt-1 text-center">Acesso ao painel administrativo</p>
</div>

<!-- Mensagem de erro -->
<div id="errorMessage" class="hidden mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm"></div>

<form id="loginForm" class="flex flex-col gap-4">
<div class="flex flex-col">
<label class="text-[#333333] dark:text-background-light text-sm font-medium leading-normal pb-2" for="username">Nome de Usuário</label>
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#333333] dark:text-background-light focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#e5e7eb] dark:border-[#E0E0E0] bg-background-light/80 dark:bg-[#322518]/80 h-12 placeholder:text-[#333333]/30 dark:placeholder:text-[#FDFDFD]/30 p-3 text-base font-normal leading-normal" id="username" placeholder="digite seu nome de usuário" value=""/>
</div>
<div class="flex flex-col">
<label class="text-[#333333] dark:text-background-light text-sm font-medium leading-normal pb-2" for="password">Senha</label>
<div class="flex w-full flex-1 items-stretch">
<input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-l-lg text-[#333333] dark:text-background-light focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#e5e7eb] dark:border-[#E0E0E0] bg-background-light/80 dark:bg-[#322518]/80 h-12 placeholder:text-[#333333]/30 dark:placeholder:text-[#FDFDFD]/30 p-3 border-r-0 pr-2 text-base font-normal leading-normal" id="password" placeholder="Digite sua senha" type="password" value=""/>
<div class="text-[#333333] dark:text-[#e5e7eb] flex border border-[#e5e7eb] dark:border-[#E0E0E0] bg-background-light/80 dark:bg-[#322518]/80 items-center justify-center px-3 rounded-r-lg border-l-0 cursor-pointer" id="togglePassword">
<span class="material-symbols-outlined text-xl">visibility</span>
</div>
</div>
</div>
<div class="flex items-center justify-end mt-2">
</div>
<div class="flex justify-center pt-4">
<button id="loginButton" class="flex min-w-[84px] w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-primary text-white text-base font-bold leading-normal tracking-wide hover:bg-opacity-90 transition-colors duration-200" type="submit">
<span id="buttonText" class="truncate">Entrar</span>
</button>
</div>
</form>
</div>
</div>
<footer class="absolute bottom-4 text-center">
    <p class="text-xs text-white dark:text-white">© 2025 KHUMOTONE. Todos os direitos reservados.</p>
</footer>
</div>

<script>
// SISTEMA DE AUTENTICAÇÃO
class AuthSystem {
    constructor() {
        this.validCredentials = {
            username: 'Admin',
            password: 'Cobalto72%Nebula'
        };
        this.sessionTimeout = 24 * 60 * 60 * 1000; // 24 horas
        this.init();
    }

    init() {
        // Verificar se já está logado
        if (this.isAuthenticated()) {
            this.redirectToDashboard();
        }
    }

    login(username, password) {
        if (username === this.validCredentials.username && password === this.validCredentials.password) {
            const sessionData = {
                loggedIn: true,
                username: username,
                loginTime: new Date().getTime(),
                expiry: new Date().getTime() + this.sessionTimeout
            };
            
            sessionStorage.setItem('khumotone_auth', JSON.stringify(sessionData));
            localStorage.setItem('khumotone_auth', JSON.stringify(sessionData)); // Backup
            
            return true;
        }
        return false;
    }

    logout() {
        sessionStorage.removeItem('khumotone_auth');
        localStorage.removeItem('khumotone_auth');
        window.location.href = 'login.html';
    }

    isAuthenticated() {
        // Verificar sessionStorage primeiro
        let sessionData = sessionStorage.getItem('khumotone_auth');
        
        // Se não encontrar no sessionStorage, verificar localStorage
        if (!sessionData) {
            sessionData = localStorage.getItem('khumotone_auth');
            if (sessionData) {
                // Restaurar sessão do localStorage para sessionStorage
                sessionStorage.setItem('khumotone_auth', sessionData);
            }
        }

        if (sessionData) {
            try {
                const auth = JSON.parse(sessionData);
                const now = new Date().getTime();
                
                // Verificar se a sessão expirou
                if (auth.expiry && now > auth.expiry) {
                    this.logout();
                    return false;
                }
                
                return auth.loggedIn === true;
            } catch (error) {
                console.error('Erro ao verificar autenticação:', error);
                return false;
            }
        }
        
        return false;
    }

    requireAuth() {
        if (!this.isAuthenticated()) {
            // Salvar a página atual para redirecionar após login
            const currentPath = window.location.pathname + window.location.search;
            sessionStorage.setItem('redirectAfterLogin', currentPath);
            
            // Redirecionar para login
            window.location.href = 'login.html';
            return false;
        }
        return true;
    }

    redirectToDashboard() {
        const redirectPath = sessionStorage.getItem('redirectAfterLogin') || 'cms2.html';
        sessionStorage.removeItem('redirectAfterLogin');
        window.location.href = redirectPath;
    }

    getCurrentUser() {
        const sessionData = sessionStorage.getItem('khumotone_auth') || localStorage.getItem('khumotone_auth');
        if (sessionData) {
            try {
                return JSON.parse(sessionData);
            } catch (error) {
                return null;
            }
        }
        return null;
    }
}

// Inicializar sistema de autenticação
const auth = new AuthSystem();

document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    const errorMessage = document.getElementById('errorMessage');
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const loginButton = document.getElementById('loginButton');
    const buttonText = document.getElementById('buttonText');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const progressFill = document.getElementById('progressFill');
    
    // Se já estiver autenticado, redirecionar
    if (auth.isAuthenticated()) {
        auth.redirectToDashboard();
        return;
    }
    
    // Toggle para mostrar/ocultar senha
    togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        // Alterar ícone
        const icon = this.querySelector('span');
        icon.textContent = type === 'password' ? 'visibility' : 'visibility_off';
    });
    
    // Validação do formulário
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value;
        
        // Esconder mensagem de erro anterior
        errorMessage.classList.add('hidden');
        
        // Validação básica
        if (!username || !password) {
            showError('Por favor, preencha todos os campos.');
            return;
        }
        
        // Desabilitar botão e mostrar loading
        showLoading();
        
        // Simular processamento do login (2 segundos)
        setTimeout(() => {
            // Verificar credenciais usando o sistema de autenticação
            if (auth.login(username, password)) {
                // Login bem-sucedido - completar animação e redirecionar
                completeProgress();
                setTimeout(() => {
                    auth.redirectToDashboard();
                }, 500);
            } else {
                // Login falhou
                hideLoading();
                showError('Nome de usuário ou senha incorretos. Tente novamente.');
                
                // Limpar campo de senha
                document.getElementById('password').value = '';
                
                // Dar foco no campo de senha
                document.getElementById('password').focus();
            }
        }, 2000);
    });
    
    function showLoading() {
        // Desabilitar botão
        loginButton.disabled = true;
        loginButton.classList.add('opacity-50', 'cursor-not-allowed');
        buttonText.textContent = 'Processando...';
        
        // Mostrar overlay de loading
        loadingOverlay.style.display = 'flex';
        
        // Iniciar animação da barra de progresso
        setTimeout(() => {
            progressFill.classList.add('animate-progress');
        }, 100);
    }
    
    function hideLoading() {
        // Reabilitar botão
        loginButton.disabled = false;
        loginButton.classList.remove('opacity-50', 'cursor-not-allowed');
        buttonText.textContent = 'Entrar';
        
        // Esconder overlay de loading
        loadingOverlay.style.display = 'none';
        
        // Resetar barra de progresso
        progressFill.classList.remove('animate-progress');
        progressFill.style.width = '0%';
    }
    
    function completeProgress() {
        // Completar a barra de progresso
        progressFill.style.width = '100%';
    }
    
    function showError(message) {
        errorMessage.textContent = message;
        errorMessage.classList.remove('hidden');
        
        // Efeito de shake no formulário
        loginForm.classList.add('animate-shake');
        setTimeout(() => {
            loginForm.classList.remove('animate-shake');
        }, 500);
        
        // Auto-esconder após 5 segundos
        setTimeout(() => {
            errorMessage.classList.add('hidden');
        }, 5000);
    }
    
    // Prevenir acesso via teclas (F12, Ctrl+U, etc.)
    document.addEventListener('keydown', function(e) {
        if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.key === 'u')) {
            e.preventDefault();
        }
    });
    
    // Prevenir clique direito
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });
});
</script>

</body>
</html>